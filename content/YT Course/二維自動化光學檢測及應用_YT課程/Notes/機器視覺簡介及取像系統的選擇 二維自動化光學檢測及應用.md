---
title: 機器視覺簡介及取像系統的選擇
draft: false
tags: 
date: 2024-09-06
---
## 原作者
原投影片作者:  吳先晃
雲林科技大學電機系教授


## 機器視覺簡介及取像系統的選擇
- [課程及機器視覺簡介](https://www.youtube.com/watch?v=Hpp_wC0FMDE&list=PLI6pJZaOCtF0yLRQrV7JOBUaAfJ8Q-elm&index=1&pp=iAQB)
	- ![[Pasted image 20240905191604.png]]
	- ![[Pasted image 20240905191810.png]]
	- 定義 
		- 以非接觸式的方式自動擷取影像·並經自動分析影像,從中抽取資料來控制一程序或動作 
	- 需求 
		- 自動化大量生產+品質確認 人工檢測的問題(速度、可靠度、穩定度》 AO丨的優勢(全自動、改進人工缺點)
	- 定位(Positioning) 
		- 決定工件的位置及方向 
		- 光學點或工件本身的特徵 
		- 待測物相對於機台原點的位置 
		- 例:PCB(白色箭頭) >(x,y)及旋轉量:對角線兩點 
		- 自動對位精準且節省大量人力
	- 識別(Recognition) 
		- 以物品本身的特徵判定身份 
			- 生物(Bio)特徵:臉孔、指紋、虹膜、聲音 
		- 工業應用:混料之零件(工件)識別與夾取/分流 
			- 幾何形狀、顏色紋理··
	- 辨識(ldentification) 
		- 藉符號做物品身份判定 
			- Barcode,QRcode 
		- 包裝盒外的圖形或文字:辨識內容物 
		- 車牌辨識
	- 瑕疵檢測(DefectDetection)
		- 工業上AOI之最大需求:可能需多站多次檢測 
		- 瑕疵:不想要、形狀大小未知、出現位置不定 
		- 瑕疵標準的訂定:漏檢(太鬆)或假警報(太嚴) 
		- 應用例 
			- 容器工業:瓶子之裂痕瑕疵及瓶內異物、碎片風險 >PCB、LOGO、TFT面板、木板坑洞··
	- 驗證(Verification) 
		- 保證製程成功執行 
			- 自動化高速且自行運作監控 
			- 貼標:避免大量廢料(例:1200in之貼標籤機)
	- 量測(Measurement)
		- 以影像進行尺寸的量測 
		- 例:各種工件的尺寸 線寬、圓的圓心與半徑、兩線距離
- [相機與鏡頭的搭配](https://www.youtube.com/watch?v=IeXPsNyjCNU&list=PLI6pJZaOCtF0yLRQrV7JOBUaAfJ8Q-elm&index=2&pp=iAQB)
	- 相機與鏡頭搭配 
		- ![[Pasted image 20240905193203.png]]
		- 相同倍率 , 焦距越長光程越長
		- 有時拍攝物不能距離太近，就要換一顆f大一點的鏡頭
		- ![[Pasted image 20240905193728.png]]
		- ![[Pasted image 20240905193838.png]]
		- 放大倍率 alpha = v / u
		- FOV被感光元件與放大倍率決定
			- FOV = Sensor Size/alpha 
	- 基本成像原理 
	- 放大倍率 
	- lmage circle & Sensor Size 
	- FOV(FieId of View)
	- 基本成像原理感光元件變大
		- FOV變大(若image circle夠大)
	- 倍率變大
		- FOV變小(分辨率提高)
	- 焦距(f)變長
		- 光程變長(u+v)
- [光學元件規格及選用](https://www.youtube.com/watch?v=fDLFP3VSdoE&list=PLI6pJZaOCtF0yLRQrV7JOBUaAfJ8Q-elm&index=3&pp=iAQB)
	- 工業相機
		- 接口
			- ![[Pasted image 20240905200310.png]]
		- 感光元件
			- ![[Pasted image 20240905194950.png]]
			- 像素解析度(分辨率)=Pixel Size/鏡頭倍率
			- ![[Pasted image 20240905195230.png]]
				- 左邊是實驗室用的小感光元件，右邊是單眼較大的
		- 傳輸介面
		- IO,power
		- 快門
			- RoIIing Shutter 條一條取像
			- 動態必須 GIobaI Shutter 
			- ![[Pasted image 20240905195633.png]]
			- 
		- 傳輸介面
			- GiGE
				- 100m
				- 1Gbps
			- USB
				- 10m
				- USB3.05Gbps; USB2.0480Mbps
			- Camera Link
				- 已經有IO
				- 6m
				- 2~6·8Gbps
			- CoaxPress
				- 已經有IO
				- Up to 68m
				- 1·25~25Gbps
- [鏡頭規格及選用](https://www.youtube.com/watch?v=uaqEyVcMZQA&list=PLI6pJZaOCtF0yLRQrV7JOBUaAfJ8Q-elm&index=4&pp=iAQB)
	- 鏡頭
		- 接口
		- 焦距
		- 倍率
		- 光圈
		- Distortion
	- 例子
		- ![[Pasted image 20240905200707.png]]
		- ![[Pasted image 20240905200805.png]]
	- ![[Pasted image 20240905200918.png]]
	- FOV不夠?
		- 降低鏡頭倍率
	- 像素解析度不夠?
		- 增加鏡頭倍率
	- FOV與像素解析度都不夠?
		- 增加SensorSize與鏡頭倍率
	- 應用
		- ![[Pasted image 20240905201438.png]]
- [取像參數的選用](https://www.youtube.com/watch?v=zav3w2nk-PU&list=PLI6pJZaOCtF0yLRQrV7JOBUaAfJ8Q-elm&index=5&pp=iAQB)
	- 光圈
		- F#=焦距/光圈直徑
		- 控制景深、進光量
		- 數字越小光圈越大
		- 光圈越大
			- 景深越淺
			- 進光量越大
			- 常以F+數字表示
	- 曝光時間
		- 如何產出品質良好的影像:曝光時間
		- 控制進光量
		- 曝光時間越長越亮
		- 常以時間表示
			- 100ms,50us
		- 商業常以倒數表示
			- 1/10s,1/500s
	- 增益
		- 控制轉換增益
		- Gain越大
			- 畫面越亮
			- 畫面雜訊越多
		- 常以dB表示
		- 商業常以ISO表示
	- 如何產出品質良好的影像
		- 對焦清楚
			- 失焦、晃動的影響非常大
			- 曝光不足還有救，但過曝就沒救了
		- 光圈大:拍攝平面樣品(F#小,景深小)
		- 光圈小:需要不同深度影像(F#大,景深大)
		- 曝光短:物體有相對運動
		- 曝光長:物體無相對運動
		- 邊緣加工異常(小F#)及繞射現象(大F#)
- [遠心鏡頭及線掃描相機](https://www.youtube.com/watch?v=EeGd5nbLIUc&list=PLI6pJZaOCtF0yLRQrV7JOBUaAfJ8Q-elm&index=6&pp=iAQB)
	- 遠心鏡頭
		- ![[Pasted image 20240906122812.png]]
		- ![[Pasted image 20240906123026.png]]
		- ![[Pasted image 20240906123127.png]]
		- 遠心的缺點
			- 體積大
			- 價格高
	- 線掃描系統
		- 因為成像較寬通常還需要將鏡頭與相機系統拉長(使用工件延長)，而非單純接上就好
		- ![[Pasted image 20240906123915.png]]
- [光源與照明的設計](https://www.youtube.com/watch?v=n8nMBYNkGb0&list=PLI6pJZaOCtF0yLRQrV7JOBUaAfJ8Q-elm&index=7&pp=iAQB)
	- 照明的重要性
		- 重點:凸顯重要的特徵,壓抑不重要的背景
		- 光波長與物件特性的關係
	- 照明顏色
		- 波長、色溫
	- 照明控制
		- 連續照明、閃頻照明(省電、延長壽命)
	- 光源種類
		- lncandescentlamp:3000·3400K(燈泡, 鎢絲燈)
			- 優點:亮,低電壓操作
			- 缺點:大量熱,5%效率,壽命短,老化快,無閃頻
		- MetaIhalidelamps4000·4600k(金屬鹵化物燈•複金屬燈)
			- 目前少用
		- Xenonlamp:5500·12000K(氙燈)
			- 優點:200次/秒,高亮度閃光(1~20us)
			- 缺點:供電複雜且昂貴
		- FIuorescentlamp:3000-6000K(日光燈,螢光)
			- 優點:便宜·大面積
			- 缺點:壽命短,老化快,光譜分布不均,無閃頻
		- LED(AO丨中應用最多的光源)
			- 紅、藍、綠等可見光•IR、NUV
			- 白光:藍光+黃色磷光劑(phosphor)
			- 優點:
				- 發光效率佳
				- 低耗電、低熱
				- 亮度高
				- 可閃頻控制
				- 成本低
				- 種類多
				- 壽命長
				- 亮度易控制
			- ![[Pasted image 20240906125308.png]]
			- ![[Pasted image 20240906125326.png]]
	- 照明方式
		- 明視野
			- 呈現反射率差異
		- 暗視野
			- 呈現散射能量差異
		- 穿透光
			- 呈現穿透率差異
- [彩色成像品質的優化](https://www.youtube.com/watch?v=EgzT2La0E2k&list=PLI6pJZaOCtF0yLRQrV7JOBUaAfJ8Q-elm&index=8&pp=iAQB)
	- 感光元件
		- 彩色
			- ![[Pasted image 20240906130059.png]]
			- ![[Pasted image 20240906130214.png]]
			- ![[Pasted image 20240906130250.png]]
				- 每個位置都會同時對應到
				- RGB的感光元件
				- 不需要額外交換顏色資訊
				- 需要重複取像
				- 可製作成大尺寸感光元件
				- 成本高(壓電馬達)
			- ![[Pasted image 20240906130543.png]]
	- 成像品質
		- SNR
			- 衡量畫面純淨度的指標
			- 一般以dB表示
			- 超過39dB即為優秀
			- 當瑕疵只有一個pixel時SNR就很重要
		- DynamicRange
			- 衡量畫面對比度的指標
			- 一般以dB表示
			- 超過58dB即為優秀
	- 影像品質優化
		- 白平衡(彩色相機)
			- 將白(灰)色的東西校正成白(灰)色
		- 亮校正(FFC)
			- 校正畫面的亮暗不均
		- 對比擴張
			- 將畫面的對比優化
- 數位影像優化

